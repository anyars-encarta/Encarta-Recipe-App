<!DOCTYPE html>
<html>
  <head>
    <title>RecipeApp</title>
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <%= csrf_meta_tags %>
    <%= csp_meta_tag %>

    <%= stylesheet_link_tag "main", "data-turbo-track": "reload" %>
    <%= javascript_importmap_tags %>

    <%= stylesheet_link_tag "register", "data-turbo-track": "reload" %>
    <%= javascript_importmap_tags %>

    <%= stylesheet_link_tag "nav", "data-turbo-track": "reload" %>
    <%= javascript_importmap_tags %>

    <%= stylesheet_link_tag "modal", "data-turbo-track": "reload" %>
    <%= javascript_importmap_tags %>
    
    <%= stylesheet_link_tag "missing-food", "data-turbo-track": "reload" %>
    <%= javascript_importmap_tags %>

    <%= stylesheet_link_tag "style", "data-turbo-track": "reload" %>
    <%= javascript_importmap_tags %>

    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  </head>

  <body>

    <% if user_signed_in? %>
      <nav class="nav-container">
        <div class="left-menu">
          <% if user_signed_in? %>
            <form action="<%= destroy_user_session_path %>" method="post">
              <input type="hidden" name="_method" value="delete">
              <input type="hidden" name="authenticity_token" value="<%= form_authenticity_token %>">
              <button type="submit" class="btn btn-danger">Logout</button>
            </form>

            <p class="user">Welcome, <%= current_user.name %></p>
          <% end %>
        </div>

        <div class="right-menu">
          <ul class="menu-links">
            <li class="nav-item"><a href="/" data-turbolinks-track="true" class="<%= request.path == '/' ? 'active' : 'link' %> nav-link">Foods</a></li>
            <li class="nav-item"><a href="/recipes" data-turbolinks-track="true" class="<%= request.path == '/recipes' ? 'active' : 'link' %> nav-link">Recipes</a></li>
            <li class="nav-item"><a href="/public_recipes" data-turbolinks-track="true" class="<%= request.path == '/public_recipes' ? 'active' : 'link' %> nav-link">Public Recipes</a></li>
            <li class="nav-item"><a href="/inventories" data-turbolinks-track="true" class="<%= request.path == '/inventories' ? 'active' : 'link' %> nav-link">Inventories</a></li>
            <li class="nav-item"><a href="/missing_foods" data-turbolinks-track="true" class="<%= request.path == '/missing_foods' ? 'active' : 'link' %> nav-link">Food Shopping List</a></li>
          </ul>

          <div class="hamburger">
            <span class="bar"></span>
            <span class="bar"></span>
            <span class="bar"></span>
          </div>
        </div>
      </nav>
    <% end %>

    <p class="notice"><%= notice %></p>
    <p class="alert"><%= alert %></p>
    
    <%= yield %>

    <%= javascript_include_tag 'nav' %>
    <%= javascript_include_tag 'table-sort' %>
    <%= javascript_include_tag 'rails-ujs' %>
    <%= javascript_include_tag 'custom', 'data-turbolinks-track': 'reload' %>
  </body>
</html>
